import React, { Component } from 'react'
import axios from 'axios'
import { Navigate } from 'react-router-dom'


export default class RegisterProject extends Component {
    constructor(props) {
        super(props);
        this.state = {
          userid:props.userObj.id,
          testCases:[],
          testCaseId: null,
          project: {
              title:"",
              description:"",
              user:{id:""}
          },
          registrationSuccessful:false
        }
        this.titleChange = this.titleChange.bind(this);
        this.descriptionChange = this.descriptionChange.bind(this);

      this.testCaseIdChange=this.setTestCaseId.bind(this);
      }

componentDidMount(){
}



titleChange(event) {
this.setState({ title: event.target.value });
}
descriptionChange(event) {
this.setState({ description: event.target.value });
}

registerProject(){
    let project={
        title: this.state.title,
        description:this.state.description,
        user:{id:this.state.userid } 
    };
    this.setState({ project }, () => {
        axios
            .post("/rest/register/project", this.state.project)
            console.log(this.state.project);
            this.setState({registrationSuccessful:true})
    });
}

setTestCaseId(id){
  this.setState({testCaseId:id})
  
}



  render() {

if(this.state.registrationSuccessful){
    return <Navigate to ={"/userDashboard"}/>

}
else{
    return (
        <div>RegisterProject component <br />
  
  
  <div className="newProject">
          <label>Project Title: </label> 
          <input type="text" value={this.state.title} placeholder='title' onChange={this.titleChange}/>
          <input type="text" value={this.state.description} placeholder='description(optional)' onChange={this.descriptionChange}/>

          
          <button onClick={() => this.registerProject()}>Register</button>
              
        </div>     
        </div>
      )
}

    
  }
}



