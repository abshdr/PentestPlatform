import React, { Component } from 'react'
import axios from 'axios'
import { Navigate } from 'react-router-dom'


export default class RegisterTestCase extends Component {
    constructor(props) {
        super(props);
        this.state = {
          userid:props.userObj.id,

          testCase: {
              title:"",
              user:{id:""}
          },
          registrationSuccessful:false
        }
        this.titleChange = this.titleChange.bind(this);

      }
      titleChange(event) {
        this.setState({ title: event.target.value });
      }

registerTestCase(){
    let testCase={
        title: this.state.title,
        user:{id:this.state.userid } 
    };
    this.setState({ testCase }, () => {
        axios
            .post("/admin/register/testCase", this.state.testCase)
            console.log(this.state.testCase);
            this.setState({registrationSuccessful:true})
    });
}



  render() {

if(this.state.registrationSuccessful){
    return <Navigate to ={"/adminDashboard"}/>

}
else{
    return (
        <div>RegisterTestCase
  
  
  <div className="newGroup">
          <label>Title: </label> 
          <input type="text" value={this.state.title} onChange={this.titleChange}/>
         
          <button onClick={() => this.registerTestCase()}>Register testcase</button>
              
        </div>
        </div>
      )
}

    
  }
}
