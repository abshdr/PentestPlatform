import React, { Component } from 'react'
import axios from 'axios'
import { Link } from "react-router-dom";


export default class AdminDashboard extends Component {
  constructor(props) {
    super(props);
    this.state = {
      userid:props.userId,
      testCases: [],
    }
  }

  componentDidMount() {
    this.loadAllTestCases();  }

      loadAllTestCases(){
        axios
          .get("http://localhost:8080/rest/allTestcases")
          .then((response) => response.data)
          .then((data) => {
            this.setState({ testCases: data });
            console.log(this.state.testCases);
          });
      }

      deleteScript(){
        axios.delete("http://localhost:8080/deleteScript/")

      }
      

  render() {


    return (

      <div><h1>Admin dashboard</h1>
        {renderTestCases(
          this.state.testCases
        )}

      </div>
    )
  }
}

function renderTestCases(testCases){
  let testCaseValues = Object.values(testCases);
  
  let testCaseList =[];
  
  for (let i = 0; i < testCaseValues.length; i++){
    testCaseList.push(
      <div key={i} className="profile-groups-list">
            <div>
              <Link to={`/testCase/${testCaseValues[i].id}`}>
                <span>{testCaseValues[i].title}</span>
              </Link>{" "}
              
              
            </div> 
            </div>
    )
  }
  return testCaseList;
  }
  
