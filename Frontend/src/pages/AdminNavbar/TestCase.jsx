import React, { Component } from 'react'
import axios from 'axios'
import { Link } from "react-router-dom";


export default class TestCase extends Component {
  constructor(props) {
    super(props);
    this.state = {
      userid:props.userObj.id,
      testCases: [],
    }
  }


  
  componentDidMount() {
this.loadTestCases();  }

  loadTestCases(){
    axios
      .get("http://localhost:8080/admin/testCaseByUser/" + this.state.userid)
      .then((response) => response.data)
      .then((data) => {
        this.setState({ testCases: data });
        console.log(this.state.testCases);
      });
  }

  render() {
    return (
      <div><h1>TestCase page </h1>
<Link to="/registerTestCase">
        <button>Create new testCase</button> </Link>

        <h2>My testcases</h2>
        {renderTestCases(
          this.state.testCases
        )}
      </div>
    )
  }
}

function renderTestCases(testCases){
    let testCaseValues = Object.values(testCases);
    
    let testCaseList =[];
    
    for (let i = 0; i < testCaseValues.length; i++){
      testCaseList.push(
        <div key={i} >
              <div>
                <Link to={`/testCase/${testCaseValues[i].id}`}>
                  <span>{testCaseValues[i].title}</span>
                </Link>{" "}
                
                
              </div> 
              </div>
      )
    }
    return testCaseList;
    }
    
  
